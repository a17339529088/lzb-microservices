#!/bin/bash
# å¿«é€Ÿéƒ¨ç½²å‚è€ƒå¡ - Quick Deployment Reference

echo "=========================================="
echo "LZBå¾®æœåŠ¡ - å¿«é€Ÿéƒ¨ç½²å‚è€ƒ"
echo "=========================================="
echo ""
echo "ğŸ“‹ éƒ¨ç½²å‰æ£€æŸ¥æ¸…å•:"
echo "  â–¡ JDK 17 å·²å®‰è£…"
echo "  â–¡ Maven 3.8+ å·²å®‰è£…"
echo "  â–¡ Docker å·²å®‰è£…å¹¶è¿è¡Œ"
echo "  â–¡ Docker Compose å·²å®‰è£…"
echo "  â–¡ ç«¯å£ 7573, 8848, 3306, 6379, 389 æœªè¢«å ç”¨"
echo ""
echo "=========================================="
echo "ğŸš€ å¿«é€Ÿéƒ¨ç½²å‘½ä»¤"
echo "=========================================="
echo ""
echo "1ï¸âƒ£  å¯¼å…¥Nacosé…ç½®ï¼ˆå¿…é¡»å…ˆæ‰§è¡Œï¼‰:"
echo "   bash scripts/import-nacos-config.sh"
echo ""
echo "2ï¸âƒ£  è®¾ç½®GitHub OAuthï¼ˆå¯é€‰ï¼‰:"
echo "   export GITHUB_CLIENT_ID=your-client-id"
echo "   export GITHUB_CLIENT_SECRET=your-client-secret"
echo ""
echo "3ï¸âƒ£  æ„å»ºå’Œéƒ¨ç½²æ‰€æœ‰æœåŠ¡:"
echo "   bash scripts/build-and-deploy.sh"
echo ""
echo "4ï¸âƒ£  éªŒè¯éƒ¨ç½²çŠ¶æ€:"
echo "   bash scripts/verify-deployment.sh"
echo ""
echo "=========================================="
echo "ğŸ” å¸¸ç”¨æ£€æŸ¥å‘½ä»¤"
echo "=========================================="
echo ""
echo "æŸ¥çœ‹æœåŠ¡çŠ¶æ€:"
echo "  docker-compose ps"
echo ""
echo "æŸ¥çœ‹æœåŠ¡æ—¥å¿—:"
echo "  docker-compose logs -f lzb-gateway"
echo "  docker-compose logs -f lzb-uaa"
echo "  docker-compose logs -f lzb-product"
echo ""
echo "æ£€æŸ¥æœåŠ¡å¥åº·:"
echo "  curl http://localhost:7573/actuator/health"
echo ""
echo "æ£€æŸ¥Nacosæ³¨å†Œ:"
echo "  curl http://localhost:8848/nacos/v1/ns/service/list?pageNo=1&pageSize=10"
echo ""
echo "=========================================="
echo "ğŸŒ è®¿é—®åœ°å€"
echo "=========================================="
echo ""
echo "API Gateway:    http://localhost:7573"
echo "ç™»å½•é¡µé¢:       http://localhost:7573/uaa/login"
echo "Nacosæ§åˆ¶å°:    http://localhost:8848/nacos"
echo "                (ç”¨æˆ·å/å¯†ç : nacos/nacos)"
echo ""
echo "=========================================="
echo "ğŸ§ª æµ‹è¯•API"
echo "=========================================="
echo ""
echo "1. è·å–Token:"
echo "   curl -X POST http://localhost:7573/uaa/login \\"
echo "     -H 'Content-Type: application/json' \\"
echo "     -d '{\"username\":\"admin\",\"password\":\"admin123\"}'"
echo ""
echo "2. æŸ¥è¯¢äº§å“:"
echo "   curl -X GET http://localhost:7573/api/products \\"
echo "     -H 'Authorization: Bearer YOUR_TOKEN'"
echo ""
echo "3. åˆ›å»ºäº§å“:"
echo "   curl -X POST http://localhost:7573/api/products \\"
echo "     -H 'Authorization: Bearer YOUR_TOKEN' \\"
echo "     -H 'Content-Type: application/json' \\"
echo "     -d '{\"name\":\"Test\",\"price\":99.99,\"stock\":100}'"
echo ""
echo "=========================================="
echo "ğŸ”§ æ•…éšœæ’æŸ¥"
echo "=========================================="
echo ""
echo "æœåŠ¡unhealthy:"
echo "  1. æ£€æŸ¥Nacosé…ç½®æ˜¯å¦å·²å¯¼å…¥"
echo "  2. è¿è¡Œ: bash scripts/import-nacos-config.sh"
echo "  3. é‡å¯: docker-compose restart lzb-gateway lzb-uaa lzb-product"
echo ""
echo "Nacosé…ç½®æœªç”Ÿæ•ˆ:"
echo "  1. è®¿é—® http://localhost:8848/nacos"
echo "  2. æ£€æŸ¥é…ç½®åˆ—è¡¨ä¸­æ˜¯å¦æœ‰ä»¥ä¸‹é…ç½®:"
echo "     - common-config.yml"
echo "     - lzb-gateway-docker.yml"
echo "     - lzb-uaa-docker.yml"
echo "     - lzb-product-docker.yml"
echo ""
echo "GitHub OAuthä¸å·¥ä½œ:"
echo "  1. åœ¨Nacosä¸­ç¼–è¾‘ lzb-uaa-docker.yml"
echo "  2. è®¾ç½®æ­£ç¡®çš„ GITHUB_CLIENT_ID å’Œ GITHUB_CLIENT_SECRET"
echo "  3. é‡å¯: docker-compose restart lzb-uaa"
echo ""
echo "=========================================="
echo "ğŸ“š è¯¦ç»†æ–‡æ¡£"
echo "=========================================="
echo ""
echo "å®Œæ•´éƒ¨ç½²æŒ‡å—:   NACOS_DEPLOYMENT_GUIDE.md"
echo "APIæµ‹è¯•æ–‡æ¡£:    API_TESTING.md"
echo "ä»»åŠ¡å®Œæˆæ€»ç»“:   TASK_COMPLETION_SUMMARY.md"
echo "é¡¹ç›®è¯´æ˜:       README.md"
echo ""
echo "=========================================="
